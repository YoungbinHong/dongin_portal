# Dongin Portal Server

## 로그 시스템

### 로그 파일 위치
모든 로그는 `server/logs/` 디렉토리에 저장됩니다.

```
server/logs/
├── system.log          # 시스템 전체 로그 (로그인, 게시글, 사용자 관리 등)
├── access.log          # API 요청/응답 로그
├── event.log           # 이벤트 로그
├── error.log           # 에러 로그만 별도 저장
└── users/              # 유저별 로그
    ├── admin.log
    ├── user.log
    └── ...
```

### 로그 종류

#### 1. 시스템 로그 (system.log)
- 서버 시작/종료
- 사용자 인증 (로그인/로그아웃)
- 게시글/댓글 작성/삭제
- 관리자 작업 (사용자 생성/수정/삭제)
- 비밀번호 변경

#### 2. 액세스 로그 (access.log)
- 모든 API 요청/응답
- HTTP 메소드, 경로, 상태 코드
- 클라이언트 IP, 처리 시간

#### 3. 이벤트 로그 (event.log)
- 클라이언트에서 전송한 이벤트
- 사용자 활동 추적

#### 4. 에러 로그 (error.log)
- 예외 발생 시 자동 기록
- 스택 트레이스 포함

#### 5. 유저별 로그 (users/{username}.log)
- 해당 사용자의 모든 활동 기록
- 로그인/로그아웃
- 게시글/댓글 작성
- 비밀번호 변경
- 관리자의 경우 관리 작업도 포함

### 로그 로테이션
- system.log, access.log, event.log, error.log: 10MB 초과 시 자동 백업 (최대 5개 보관)
- 유저별 로그: 5MB 초과 시 자동 백업 (최대 3개 보관)

### 로그 포맷
```
[레벨] 2024-02-09 15:30:45 | 메시지
```

### 로그 레벨
- INFO: 일반 정보
- WARNING: 경고 (실패한 로그인 시도 등)
- ERROR: 에러 발생

### API 요청 로그
모든 API 요청은 자동으로 로깅됩니다:
- 요청: 메소드, 경로, 클라이언트 IP
- 응답: 상태 코드, 처리 시간(ms)

### 예시

**system.log:**
```
2024-02-09 15:30:45 | 로그인 성공 | 사용자: admin | 역할: admin
2024-02-09 15:30:47 | 게시글 작성 완료 | 작성자: admin | 카테고리: notice | 제목: 공지사항
2024-02-09 15:31:00 | 로그인 실패 | 사용자명: hacker | 이유: 잘못된 인증 정보
```

**access.log:**
```
2024-02-09 15:30:46 | [요청] POST /api/posts | 클라이언트: 172.18.0.1
2024-02-09 15:30:47 | [응답] POST /api/posts | 상태: 201 | 처리시간: 45.23ms
2024-02-09 15:30:50 | [요청] GET /api/posts | 클라이언트: 172.18.0.1
2024-02-09 15:30:51 | [응답] GET /api/posts | 상태: 200 | 처리시간: 12.34ms
```

**event.log:**
```
2024-02-09 15:32:10 | [이벤트] 사용자: admin | 동작: PDF 압축
2024-02-09 15:33:25 | [이벤트] 사용자: user | 동작: 파일 다운로드
```
